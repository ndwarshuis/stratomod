# directories for input/output files
paths:
  resources: "resources"
  results: "results"
  log: "log"

# Data specific to a reference fasta file, including benchmarks, feature context
# data, and other metadata.
references:
  # A unique key for this reference (which should probably correspond to the
  # the commonly used name for the reference.
  GRCh37:

    # The source for the reference itself. NOTE, this is an SDF as defined by
    # vcftools and not a fasta.
    sdf:
      # The location of the referenece
      url: https://s3.amazonaws.com/rtg-datasets/references/1000g_v37_phase2.sdf.zip

      # The prefix used for chromosomes in this sdf.
      chr_prefix: ""

    # TODO this isn't necessary as the genome can be derived from an index file.
    genome:
      url: https://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/chromInfo.txt.gz
      chr_prefix: chr

    # Any GIAB stratifications pertinant to this reference which will be used
    # for filtering out invalid variants
    strats:

      # The MHC regions
      mhc:
        url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.1/GRCh37/OtherDifficult/GRCh37_MHC.bed.gz
        chr_prefix: ""

    # Data used for feature generation.
    annotations:

      # Data used for creating difficult-to-map features. These are actually
      # GIAB stratification files.
      mappability:

        # Low stringency mappability file
        low:
          url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.0/GRCh37/mappability/GRCh37_lowmappabilityall.bed.gz
          chr_prefix: ""

        # High stringency mappability file
        high:
          url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.0/GRCh37/mappability/GRCh37_nonunique_l250_m0_e0.bed.gz
          chr_prefix: ""

      # Data used for creating the segmental duplications features. Assumes file
      # from the UCSC superdups database
      superdups:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/genomicSuperDups.txt.gz
        chr_prefix: chr

      # Data used for making tandem repeats feaures. Expects a UCSC simple
      # repeats-like database file
      simreps:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/simpleRepeat.txt.gz
        chr_prefix: chr

      # Data used for making transposable element features. Expects a repeat-masker
      # output file.
      repeat_masker:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg19/database/rmsk.txt.gz
        chr_prefix: chr

    # A list of valid benchmarks
    benchmarks:
      # Unique key for this benchmark
      HG002_v421:

        # where to obtain the vcf
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG002_NA24385_son/NISTv4.2.1/GRCh37/HG002_GRCh37_1_22_v4.2.1_benchmark.vcf.gz

        # where to obtain the bed file
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG002_NA24385_son/NISTv4.2.1/GRCh37/HG002_GRCh37_1_22_v4.2.1_benchmark_noinconsistent.bed

        # the chromosome prefix in this benchmark (assumed to be the same in the
        # vcf and bed)
        chr_prefix: ""

        # corrections to be made to the vcf
        corrections:

          # in some VCF files, there is an IPS FORMAT fields that causes vcfeval
          # to format the output weirdly. Set this to true to activate a
          # workaround.
          strip_IPS: false

      HG003_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG003_NA24149_father/NISTv4.2.1/GRCh37/HG003_GRCh37_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG003_NA24149_father/NISTv4.2.1/GRCh37/HG003_GRCh37_1_22_v4.2.1_benchmark_noinconsistent.bed
        chr_prefix: ""
        corrections:
          strip_IPS: false
      HG004_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG004_NA24143_mother/NISTv4.2.1/GRCh37/HG004_GRCh37_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG004_NA24143_mother/NISTv4.2.1/GRCh37/HG004_GRCh37_1_22_v4.2.1_benchmark_noinconsistent.bed
        chr_prefix: ""
        corrections:
          strip_IPS: false
      HG005_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG005_NA24631_son/NISTv4.2.1/GRCh37/HG005_GRCh37_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG005_NA24631_son/NISTv4.2.1/GRCh37/HG005_GRCh37_1_22_v4.2.1_benchmark.bed
        chr_prefix: ""
        corrections:
          strip_IPS: true
      HG006_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG006_NA24694_father/NISTv4.2.1/GRCh37/HG006_GRCh37_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG006_NA24694_father/NISTv4.2.1/GRCh37/HG006_GRCh37_1_22_v4.2.1_benchmark.bed
        chr_prefix: ""
        corrections:
          strip_IPS: false
      HG007_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG007_NA24695_mother/NISTv4.2.1/GRCh37/HG007_GRCh37_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG007_NA24695_mother/NISTv4.2.1/GRCh37/HG007_GRCh37_1_22_v4.2.1_benchmark.bed
        chr_prefix: ""
        corrections:
          strip_IPS: false
      draft_v0.005:
        vcf_url: null
        bed_url: null
        chr_prefix: ""
        corrections:
          strip_IPS: false
      draft_v2.7_xy:
        vcf_url: null
        bed_url: null
        chr_prefix: ""
        corrections:
          strip_IPS: false

  GRCh38:
    sdf:
      url: https://s3.amazonaws.com/rtg-datasets/references/GRCh38.sdf.zip
      chr_prefix: chr
    genome:
      url: https://hgdownload.cse.ucsc.edu/goldenPath/hg38/database/chromInfo.txt.gz
      chr_prefix: chr
    strats:
      mhc:
        url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.1/GRCh38/OtherDifficult/GRCh38_MHC.bed.gz
        chr_prefix: chr
    annotations:
      mappability:
        low:
          url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.0/GRCh38/mappability/GRCh38_lowmappabilityall.bed.gz
          chr_prefix: chr
        high:
          url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/genome-stratifications/v3.0/GRCh38/mappability/GRCh38_nonunique_l250_m0_e0.bed.gz
          chr_prefix: chr
      superdups:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg38/database/genomicSuperDups.txt.gz
        chr_prefix: chr
      simreps:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg38/database/simpleRepeat.txt.gz
        chr_prefix: chr
      repeat_masker:
        url: https://hgdownload.cse.ucsc.edu/goldenPath/hg38/database/rmsk.txt.gz
        chr_prefix: chr
    benchmarks:
      HG002_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG002_NA24385_son/NISTv4.2.1/GRCh38/HG002_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG002_NA24385_son/NISTv4.2.1/GRCh38/HG002_GRCh38_1_22_v4.2.1_benchmark_noinconsistent.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      HG003_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG003_NA24149_father/NISTv4.2.1/GRCh38/HG003_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG003_NA24149_father/NISTv4.2.1/GRCh38/HG003_GRCh38_1_22_v4.2.1_benchmark_noinconsistent.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      HG004_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG004_NA24143_mother/NISTv4.2.1/GRCh38/HG004_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/AshkenazimTrio/HG004_NA24143_mother/NISTv4.2.1/GRCh38/HG004_GRCh38_1_22_v4.2.1_benchmark_noinconsistent.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      HG005_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG005_NA24631_son/NISTv4.2.1/GRCh38/HG005_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG005_NA24631_son/NISTv4.2.1/GRCh38/HG005_GRCh38_1_22_v4.2.1_benchmark.bed
        chr_prefix: chr
        corrections:
          strip_IPS: true
      HG006_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG006_NA24694_father/NISTv4.2.1/GRCh38/HG006_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG006_NA24694_father/NISTv4.2.1/GRCh38/HG006_GRCh38_1_22_v4.2.1_benchmark.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      HG007_v421:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG007_NA24695_mother/NISTv4.2.1/GRCh38/HG007_GRCh38_1_22_v4.2.1_benchmark.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/release/ChineseTrio/HG007_NA24695_mother/NISTv4.2.1/GRCh38/HG007_GRCh38_1_22_v4.2.1_benchmark.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      draft_v005:
        vcf_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/data/AshkenazimTrio/analysis/T2T-HG002-XY-v2.7/20220324_v0.005_HG002XYvsGRCh38/preliminary-draft-small-variant-benchmark-files/GRCh38_T2T-XY-v2.7_dipcall-z2k.vcf.gz
        bed_url: https://ftp-trace.ncbi.nlm.nih.gov/ReferenceSamples/giab/data/AshkenazimTrio/analysis/T2T-HG002-XY-v2.7/20220324_v0.005_HG002XYvsGRCh38/preliminary-draft-small-variant-benchmark-files/GRCh38_T2T-XY-v2.7_dipcall-z2k.excluded.bed
        chr_prefix: chr
        corrections:
          strip_IPS: false
      draft_v27_xy:
        vcf_url: null
        bed_url: null
        chr_prefix: chr
        corrections:
          strip_IPS: false

tools:
  repseq: https://github.com/ndwarshuis/repseq/archive/refs/tags/v1.0.0.tar.gz

# TODO some of these feature names might be reference-dependent
#
# TODO it makes more sense for alot of this to be moved to config.py as a
# static, hardcoded data structure (effectively a gigantic constant) since any
# changes to the layout of these input files will require zillions of changes
# that aren't worth exposing in a user-configurable fashion
feature_names:
  label: label

  raw_index: variant_index

  bed_index:
    chr: chrom
    start: chromStart
    end: chromEnd

  vcf:
    prefix: VCF
    columns:
      qual: QUAL
      filter: FILTER
      info: INFO
      gt: GT
      gq: GQ
      dp: DP
      vaf: VAF
      len: indel_length

  mappability:
    prefix: MAP
    suffixes:
      low: difficult_100bp
      high: difficult_250bp

  homopolymers:
    prefix: HOMOPOL
    bases: [A, T, G, C]
    suffixes:
      len: length
      imp_frac: imperfect_frac

  repeat_masker:
    prefix: REPMASK
    classes:
      SINE: []
      # TODO make this configurable since not all refs have the same families
      LINE: [L1, L2, CR1, RTE-BovB, Dong-R4]
      LTR: []
      Satellite: []

  segdups:
    prefix: SEGDUP
    columns:
      alignL: size
      fracMatchIndel: identity
    operations: [min, max, mean]

  tandem_repeats:
    prefix: TR
    columns:
      period: unit_size
      copyNum: unit_copies
      perMatch: identity
      perIndel: per_indel_mismatch
      score: score
    operations: [max, min, median]

  variables:
    prefix: VAR
    continuous:
      coverage:
        lower: 1
    categorical:
      seqtech:
        levels: ["PacBio HiFi", "Illumina"]
      variant_caller:
        levels: ["DeepVariant"]
